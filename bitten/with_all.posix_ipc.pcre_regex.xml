<build xmlns:c="http://bitten.edgewall.org/tools/c"
       xmlns:sh="http://bitten.edgewall.org/tools/sh">
  <step id="checkout" description="Checkout source">
    <sh:exec executable="rm" args="-rf *" />
    <sh:exec executable="wget"
             args="http://hg.libdodo.org/hg/archive/${repository.revision}.tar.bz2" />
    <sh:exec executable="tar" args="--strip-components=1 -jxf ${repository.revision}.tar.bz2" />
  </step>
  <step id="configure"
        description="Configure with all enabled, POSIX ipc, PCRE regex">
    <sh:exec executable="sh" args="-c 'cd sources; ./configure --enable-deque --enable-io-xexec --enable-graphics-xexec --enable-database-xexec --with-sqlite3 --with-postgresql --with-mysql --with-openssl --with-fast-cgi --with-pcre --with-dl --with-libxml2 --with-bzip2 --with-zlib --with-iconv --with-imagemagick --with-bfd'" />
  </step>
  <step id="build-library" description="Build library">
    <c:make jobs="4" target="clean" directory="sources" />
    <c:make jobs="4" directory="sources" />
  </step>
  <step id="build-example" description="Build examples">
    <c:make jobs="4" target="clean" directory="sources/examples" />
    <c:make jobs="4" directory="sources/examples" />
  </step>
</build>
