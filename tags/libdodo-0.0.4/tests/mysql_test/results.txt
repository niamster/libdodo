=================================================
10.08.2005
+++++++++++++++++++++++++++++++++++++++++++++++++
CONF
P4 2400/2048Mb(Hynix)
+++++++++++++++++++++++++++++++++++++++++++++++++
RES

compare.sql.cc(g++(3.4.3),-O3 -march=pentium4)

real    0m48.704s
user    0m4.898s
sys     0m1.512s

MEM 0.1%
CPU 7.4%

-------------------------------------------------
compare.sql.php(php(5.0.4),gcc(3.4.3),-O2 -march=pentium4)

real    2m7.375s
user    0m44.459s
sys     0m2.238s

MEM 2.1%(progressively from 0.1%)
CPU 42.3%
+++++++++++++++++++++++++++++++++++++++++++++++++
CODE

compare.sql.cc:

#include <mysqlinterface.h>

using namespace dodo;

using namespace std;

int main(int argc, char **argv)
{
	try
	{
		mysqlpp pp;	
		pp.setSqlInfo(string("test"),string(""),3306,string(""),string("Dmitrik"));
		pp.connect();		
		
		vector<string> fields;
		fields.push_back("date");
		fields.push_back("operation");
		
		vector<string> values;
		values.push_back("2005-07-08");
		values.push_back("mu");
		
		for (int i=0;i<100000;i++)
		{
			//pp.select("log",fields,"`id`<20 or `operation`='mu'");
			//pp.exec();
			pp.insert("log",values,fields);
			pp.exec();
			pp.update("log",values,fields);
			pp.limit(50);
			pp.exec();

		}
	}
	catch(mysqlppEx ex)
	{
		printf("MYexception was in:%d; in %s at %d\n",ex.reason,ex.file.c_str(),ex.line);
	}
	catch(sqlBaseEx ex)
	{
		printf("BASEexception was in:%d; in %s at %d\n",ex.reason,ex.file.c_str(),ex.line);
	}	
	return 0;
}
-------------------------------------------------

compare.sql.php:

<?
	
	require_once('db_mysql.class.php');
	
	set_time_limit(0);	

	$config = array(
					'sql_database' => 'test',
					'sql_user' => 'root',
					'sql_pass' => 'Dmitrik',
					'sql_tbl_prefix' => '',
					'debug' => 0,
					'hooks' => array()
					);

	$DB = new db_driver_mysql($config);
	$DB->connect();

	$arr = array(
					'date' => '2005-07-08',
					'operation' => 'mu'
				);

	$select = array(
					'date','operation'
					);
	for ($i=0;$i<100000;$i++)
	{
		$DB->select('log',$select,"`id`<20 or `operation`='mu'");
		$DB->exec();
		$DB->insert('log',$arr);
		$DB->exec();		
		$DB->update('log',$arr,'id=200000');
		$DB->exec();
		$DB->delete('log','id=200000');
		$DB->limit(5);
		$DB->exec();		
	}
?>
+++++++++++++++++++++++++++++++++++++++++++++++++
=================================================
