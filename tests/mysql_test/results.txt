=================================================
10.08.2005
+++++++++++++++++++++++++++++++++++++++++++++++++
CONF
P4 2400/2048Mb(Hynix)
+++++++++++++++++++++++++++++++++++++++++++++++++
RES

compare.sql.cc(g++(3.3.5),-O3 -march=pentium4)

real    1m48.162s
user    0m23.390s
sys     0m6.663s

MEM 0.1%
CPU 7.4%

-------------------------------------------------
compare.sql.php(php(5.0.4),gcc(3.3.5),-O2 -march=pentium4)

real    2m21.628s
user    1m24.565s
sys     0m7.078s


MEM 2.1%(progressively from 0.1%)
CPU 42.3%
+++++++++++++++++++++++++++++++++++++++++++++++++
CODE

compare.sql.cc:

#include <dbMysql.h>

using namespace dodo;

using namespace std;

int main(int argc, char **argv)
{
	dbMysql pp;	
	try
	{
		pp.setDbInfo(string("test"),string(""),0,string(""),string("Dmitrik"),"/tmp/mysql.sock");
		pp.connect();		
		
		map<string,string> arr;
		arr["date"] = "2005-07-08";
		arr["operation"] = "mu";
		
		vector<string> select;
		select.push_back("date");
		select.push_back("operation");
		
		for (int i=0;i<3000;i++)
		{
			pp.select("log",select,"`id`<20 or `operation`='mu'");
			pp.exec();
			pp.fetch();
			
			pp.insert("log",arr);
			pp.exec();
			
/*			arr["operation"] = "um";
			pp.update("log",arr);
			arr["operation"] = "mu";
			pp.limit(50);
			pp.exec();*/		
		}
	}
	catch(baseEx ex)
	{
		printf("BASEexception was in: in %s at %d\n",ex.file.c_str(),ex.line);
	}	
	return 0;
}
-------------------------------------------------

compare.sql.php:

<?
	
	require_once('db_mysql.class.php');
	
	set_time_limit(0);	

	$config = array(
					'sql_database' => 'test',
					'sql_user' => 'root',
					'sql_pass' => 'Dmitrik',
					'sql_tbl_prefix' => '',
					'debug' => 0,
					'hooks' => array()
					);

	$DB = new db_driver_mysql($config);
	$DB->connect();

	$arr = array(
					'date' => '2005-07-08',
					'operation' => 'mu'
				);

	$select = array(
					'date','operation'
					);
					
	for ($i=0;$i<3000;$i++)
	{
		$DB->select('log',$select,"`id`<20 or `operation`='mu'");
		$DB->exec();	
		$DB->getAssocArray();
		
		$DB->insert('log',$arr);
		$DB->exec();
		
/*		$arr['operation'] = 'um';		
		$DB->update('log',$arr,'1');
		$arr['operation'] = 'mu';
		$DB->limit(50);
		$DB->exec();*/	
	}
?>
+++++++++++++++++++++++++++++++++++++++++++++++++
=================================================
